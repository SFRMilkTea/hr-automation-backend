databaseChangeLog:
  - preConditions:
      onFail: CONTINUE
      onError: CONTINUE
  - changeSet:
      id: 29.01.2023-1
      labels: example
      author: SFRMilkTea
      changes:
        - modifyDataType:
            tableName: question_entity
            columnName: description
            newDataType: varchar(1000)
  - changeSet:
      id: 05.02.2023-1
      labels: example
      author: SFRMilkTea
      changes:
        - addNotNullConstraint:
            tableName: restaurant_entity
            columnName: rating
        - addNotNullConstraint:
            tableName: restaurant_entity
            columnName: average
        - renameColumn:
            tableName: restaurant_entity
            oldColumnName: restaurant_id
            newColumnName: reviews

  - changeSet:
      id: 18.02.2023-2
      labels: dropNotNullConstraints
      author: SFRMilkTea
      changes:
        - dropNotNullConstraint:
            tableName: restaurant_entity
            columnName: rating
        - dropNotNullConstraint:
            tableName: restaurant_entity
            columnName: average

  - changeSet:
      id: 25.02.2023-1
      labels: fixAverage
      author: SFRMilkTea
      changes:
        - addDefaultValue:
            tableName: restaurant_entity
            columnName: rating
            defaultValueComputed: 0

  - changeSet:
      id: 25.02.2023-2
      labels: fixAverage
      author: SFRMilkTea
      changes:
        - addDefaultValue:
            tableName: restaurant_entity
            columnName: average
            defaultValueComputed: 0

  - changeSet:
      id: 19.03.2023-1
      labels: deleteRestWithReviews
      author: SFRMilkTea
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: restaurant_id
            baseTableName: review_entity
            constraintName: fk_on_delete_restaurant
            onDelete: CASCADE
            referencedColumnNames: id
            referencedTableName: restaurant_entity

  - changeSet:
      id: 19.03.2023-2
      labels: dropNotNullConstraintInReviews
      author: SFRMilkTea
      changes:
        - dropNotNullConstraint:
            tableName: review_entity
            columnName: restaurant_id

  - changeSet:
      id: 19.03.2023-3
      labels: dropConstraintInReviews
      author: SFRMilkTea
      changes:
        - dropForeignKeyConstraint:
            baseTableName: review_entity
            constraintName: fkoy7tww3o4ankwlarmwfl4y5d1

  - changeSet:
      id: 02.04.2023-1
      labels: reworkEventGallery
      author: SFRMilkTea
      changes:
        - renameColumn:
            tableName: event_gallery_entity
            oldColumnName: picture_url
            newColumnName: url

  - changeSet:
      id: 02.04.2023-2
      labels: deleteEventGallery
      author: SFRMilkTea
      changes:
        - dropTable:
            tableName: event_gallery_entity
            cascadeConstraints: true

  - changeSet:
      id: 09.04.2023-2
      labels: dropNotNullConstraintInEventMaterial
      author: SFRMilkTea
      changes:
        - dropNotNullConstraint:
            tableName: event_material_entity
            columnName: event_id

  - changeSet:
      id: 09.04.2023-3
      labels: addCityIdColumn
      author: SFRMilkTea
      changes:
        - addColumn:
            tableName: event_entity
            columns:
              - column:
                  name: city_id
                  type: bigint

  - changeSet:
      id: 09.04.2023-4
      labels: addCityIdColumnConstraint
      author: SFRMilkTea
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: city_id
            baseTableName: event_entity
            constraintName: fk_on_event_city
            onDelete: CASCADE
            referencedColumnNames: id
            referencedTableName: city_entity

  - changeSet:
      id: 09.04.2023-5
      labels: dropNotNullConstraintInEventCity
      author: SFRMilkTea
      changes:
        - dropNotNullConstraint:
            tableName: event_entity
            columnName: city_id